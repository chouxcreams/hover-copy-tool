# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際にClaude Code (claude.ai/code) に対するガイダンスを提供します。

## プロジェクト概要

「hover-copy-tool」というブラウザ拡張機能プロジェクトで、Webページ上のリンクにホバーした際に正規表現を使用してURLの特定部分を抽出できるツールです。ChromeとFirefoxに対応し、URLからIDやパラメータを頻繁に抽出する必要があるWeb開発者やQAエンジニアをターゲットとしています。

## 現在の状況

プロジェクトは初期企画段階にあります：

- `docs/PRD.md`に日本語で詳細なPRD（プロダクト要求仕様書）を作成済み
- Node.js開発環境用のMise設定を完了
- ソースコード実装はまだ未着手

## 開発環境

このプロジェクトでは開発環境管理にMiseを使用しています：

- Node.js（最新版）
- Claude Code CLIツール

開発環境のセットアップ方法：

```bash
mise install
```

**Claude Code使用時の重要な注意点**：Bashツールを使用する際、mise環境は自動的にアクティベートされません。`mise.toml`で指定された正しいNode.jsバージョンを使用するには、`mise exec`でコマンドを実行するか、事前にmiseをアクティベートする必要があります：

```bash
# 方法1: miseでコマンドを実行
mise exec -- node --version

# 方法2: mise環境をアクティベート
eval "$(mise activate bash)"
```

## 予定されているアーキテクチャ

PRDに基づき、拡張機能は以下の構成要素で構成されます：

### コアコンポーネント

- **コンテンツスクリプト**: リンクホバー検出と正規表現抽出を処理
- **ポップアップインターフェース**: 正規表現パターン管理用の設定UI
- **バックグラウンドスクリプト**: 拡張機能の状態と設定を管理
- **ホバーウィンドウ**: 抽出結果の表示とコピー機能

### 主要機能

1. **URLパターン抽出**: ユーザー定義の正規表現パターンを使用してURLから部分文字列を抽出
2. **マルチパターンサポート**: 複数の正規表現設定を保存・切り替え可能
3. **ホバーインターフェース**: 抽出結果を表示する非侵入的なポップアップ
4. **クリップボード統合**: ユーザー確認後に抽出文字列をコピー
5. **クロスブラウザ対応**: ChromeとFirefoxの両方をサポート

## ファイル構成（実装予定）

以下のファイル構成が必要です：

- `manifest.json` - ブラウザ拡張機能のマニフェスト
- `src/` - ソースコードディレクトリ
  - `content/` - Webページ連携用のコンテンツスクリプト
  - `popup/` - 拡張機能のポップアップUI
  - `background/` - バックグラウンドスクリプト
- `package.json` - Node.js依存関係とビルドスクリプト
- ビルド設定（webpack/rollup）
- テストフレームワークのセットアップ

## 開発に関する注意事項

- PRDは日本語で記述され、詳細な機能仕様を含んでいます
- 多数のリンクを含むページでのパフォーマンスに注意
- ユーザー定義正規表現パターンのセキュリティ考慮事項
- ホバーウィンドウと設定ポップアップの直感的なUI設計

# 拡張機能の権限について

この文書では、Hover Copy Toolブラウザ拡張機能が要求する各権限の必要性について説明します。

## 要求される権限

### 1. storage権限

**権限名**: `storage`

**必要な理由**:

- ユーザーが設定した正規表現パターンをブラウザ内に保存するために必要です
- 複数の抽出パターンを保存し、ユーザーが設定画面で管理できるようにします
- ブラウザを再起動してもユーザーの設定が保持されるようにします
- ユーザーのプライバシーを保護するため、すべての設定はローカルに保存され、外部サーバーには送信されません

**使用方法**:

- Chrome Storage APIを使用してユーザー設定をローカルに保存・読み込み
- 正規表現パターン、パターン名、有効/無効状態の管理

### 2. activeTab権限

**権限名**: `activeTab`

**必要な理由**:

- 現在アクティブなタブでのみリンクホバー機能を動作させるために必要です
- ユーザーがリンクにマウスカーソルを合わせた際に、URLから情報を抽出して表示します
- 最小限の権限でセキュリティを確保し、ユーザーが実際に使用しているタブでのみ動作します

**使用方法**:

- コンテンツスクリプトをアクティブなタブに注入
- リンク要素のhoverイベントを検出
- URL抽出とホバーウィンドウの表示

### 3. scripting権限

**権限名**: `scripting`

**必要な理由**:

- ユーザーがアクティブなタブで拡張機能を有効化した際に、コンテンツスクリプトを動的に注入するために必要です
- `activeTab`権限と組み合わせることで、ユーザーが明示的に拡張機能を使用する場合のみスクリプトが実行されます
- 不要な権限を削減し、セキュリティを向上させながら必要な機能を提供します

**使用方法**:

- Chrome Scripting APIを使用してコンテンツスクリプトを注入
- ページ内のリンク要素（`<a>`タグ）を検出・監視
- 正規表現によるURL抽出処理

## セキュリティとプライバシーの配慮

- **データの外部送信なし**: すべてのデータ処理はローカルで行われ、外部サーバーへの通信は一切行いません
- **最小権限の原則**: 機能実現に必要最小限の権限のみを要求し、`<all_urls>`のような広範囲な権限は使用しません
- **ユーザー制御**: スクリプトの注入はユーザーが明示的に拡張機能を使用する場合のみ実行されます
- **オンデマンド実行**: `activeTab`と`scripting`権限の組み合わせにより、必要な時のみスクリプトが動作します
- **透明性**: オープンソースプロジェクトとして、すべてのコードが公開されています

## 権限の使用範囲

これらの権限は以下の機能実現のためにのみ使用されます：

1. URL抽出パターンの保存・管理（storage権限）
2. アクティブなタブでのスクリプト実行許可（activeTab権限）
3. コンテンツスクリプトの動的注入（scripting権限）
4. Webページ上のリンクホバー検出と抽出結果の表示

ユーザーの閲覧履歴、個人情報、その他のWebページコンテンツへの不正アクセスは一切行いません。また、ユーザーが拡張機能を明示的に使用する場合のみスクリプトが実行されるため、バックグラウンドでの不要な動作はありません。

# 要件定義書：hover-copy-tool

## 1. 概要

本拡張機能「hover-copy-tool」は、ウェブサイト上のリンクにマウスカーソルを合わせた際に、そのリンクURLからユーザーが定義した正規表現にマッチする部分文字列を簡単にクリップボードへコピーする機能を提供する。これにより、特に開発者がURLから特定のIDやパラメータを迅速に取得する作業を効率化することを目的とする。

## 2. 背景・目的

開発業務において、URLに含まれる特定の情報（ユーザーID、商品ID、セッションキーなど）を参照・利用する場面は頻繁に発生する。現状では、リンクを右クリックしてURLをコピーし、テキストエディタ等に貼り付けてから必要な部分を抜き出す、あるいは開発者ツールで要素を調査するなどの手間が必要である。本拡張機能は、このプロセスを簡略化し、作業効率を向上させることを目指す。

## 3. ターゲットユーザー

- ウェブ開発者
- QAエンジニア
- その他、URLから特定情報を頻繁に抜き出す必要があるユーザー

## 4. 対応ブラウザ

- Google Chrome
- Mozilla Firefox

## 5. 主な機能

### 5.1. URLからの文字列抽出・コピー機能

- ウェブページ上の`<a>`タグで指定されたリンクにマウスカーソルを合わせると、そのhref属性値（URL）を取得する。
- あらかじめユーザーが設定した正規表現に基づき、取得したURLから部分文字列を抽出する。
- 抽出された部分文字列を、ホバーウィンドウ経由でユーザーが選択し、クリップボードにコピーする。

### 5.2. ホバーウィンドウ表示機能

- 表示タイミング: リンクにマウスカーソルを合わせると表示し、マウスカーソルがリンクから外れると即座に非表示にする。
- 表示内容:
  - 正規表現によって抽出された文字列の候補。
  - 各候補に対応するコピーボタン。
- 複数候補の表示: 抽出された文字列の候補が複数ある場合は、リスト形式で表示する。ユーザーはいずれかの候補を選択してコピー操作を行う。
- 単一候補の場合: 抽出候補が1つしかない場合でも、ユーザーがその候補を選択しコピーボタンを押すステップを必須とする。

### 5.3. 正規表現設定機能

- 設定場所: 拡張機能のアイコンをクリックした際に表示されるポップアップ画面で行う。
- 複数パターンの登録・選択: ユーザーは複数の正規表現パターンを登録・保存できる。利用時には、ポップアップ内に保存されたパターンがリスト形式で表示され、その中からアクティブなものをユーザーが選択して使用する。
- 各リストアイテムには、正規表現パターン自体と、識別のためのエイリアス名（ユーザーが任意で設定可能）を表示する。
- テスト機能: 設定した正規表現のテスト機能は不要とする。

### 5.4. コピー通知機能

文字列がクリップボードにコピーされた際、「コピーしました！」というメッセージを画面上に短時間表示する。

## 6. 非機能要件（検討事項）

- パフォーマンス: 多数のリンクが存在するページでも、ブラウザの動作が遅延しないように配慮する。
- セキュリティ: ユーザーが入力する正規表現の処理において、意図しない動作やセキュリティ上の脆弱性を生まないように注意する。
- ユーザビリティ: 設定画面やホバーウィンドウのUIは直感的で分かりやすいものにする。
